id: WU-1968
title: Fix doctor duplicate output and misleading git version prerequisite warning
lane: 'Framework: CLI WU Commands'
type: bug
status: ready
priority: P3
created: 2026-02-21
code_paths:
  - packages/@lumenflow/cli/src/doctor.ts
  - packages/@lumenflow/cli/src/init.ts
tests:
  manual:
    - Run lumenflow doctor and verify output is not duplicated
    - Run lumenflow init with git >=2.0 and verify prerequisite shows checkmark
  unit:
    - packages/@lumenflow/cli/__tests__/doctor-output.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-1968.done
dependencies: []
risks: []
notes: (auto) Add implementation notes, rollout context, or a short summary of the plan/conversation.
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: 'Context: Testing lumenflow init on lumenflow-cloud revealed two cosmetic bugs in CLI output. Problem: (1) lumenflow doctor prints entire health check output twice -- likely same double-call pattern as the scaffold dedup issue fixed in WU-1965. (2) During init, prerequisite warning says git version 2.43.0 (requires >=2.0.0) which reads like a failure even though the check passes -- the warning prefix and format are misleading for passing checks. Solution: (1) Find and eliminate duplicate doctor invocation. (2) Change prerequisite output to clearly distinguish passing vs failing checks -- passing checks should use a checkmark, only failing ones should use the warning prefix.'
acceptance:
  - lumenflow doctor output appears exactly once (no duplicate)
  - Passing prerequisite checks show a checkmark not a warning prefix
  - Failing prerequisite checks still show warning prefix with actionable guidance
