id: WU-2086
title: 'Release script: restore dist symlinks after successful release'
lane: 'Operations: Tooling'
type: bug
status: ready
priority: P2
created: 2026-02-23
code_paths:
  - packages/@lumenflow/cli/src/release.ts
tests:
  manual:
    - Run pnpm release --skip-publish and verify git status is clean after
  unit:
    - packages/@lumenflow/cli/src/__tests__/release.test.ts
  e2e: []
artifacts:
  - .lumenflow/stamps/WU-2086.done
dependencies: []
risks: []
notes: (auto) Add implementation notes, rollout context, or a short summary of the plan/conversation.
requires_review: false
assigned_to: tom@hellm.ai
exposure: backend-only
escalation_triggers: []
requires_human_escalation: false
requires_cso_approval: false
requires_cto_approval: false
requires_design_approval: false
description: After a successful release, the 4 materialized dist symlinks (cli, core, mcp, shims) are left as deleted in git status. The failure cleanup path runs pnpm install to restore them, but the success path does not. Add symlink restoration after commit+tag+push in the success path.
acceptance:
  - After successful pnpm release, git status is clean (no deleted dist symlinks)
