id: sidekick
version: 0.1.0
config_key: sidekick
task_types:
  - sidekick
tools:
  - name: task:create
    entry: tool-impl/task-tools.ts
    permission: write
    required_scopes:
      - type: path
        pattern: .sidekick/**
        access: read
      - type: path
        pattern: .sidekick/**
        access: write
    input_schema:
      type: object
      properties:
        title:
          type: string
          minLength: 1
        description:
          type: string
        priority:
          type: string
          enum: [P0, P1, P2, P3]
        due_at:
          type: string
        tags:
          type: array
          items: { type: string }
        dry_run:
          type: boolean
      required: [title]
      additionalProperties: false
    output_schema:
      type: object
      additionalProperties: true
  - name: task:list
    entry: tool-impl/task-tools.ts
    permission: read
    required_scopes:
      - type: path
        pattern: .sidekick/**
        access: read
    input_schema:
      type: object
      properties:
        status:
          type: string
          enum: [pending, done]
        priority:
          type: string
          enum: [P0, P1, P2, P3]
        tags:
          type: array
          items: { type: string }
        search:
          type: string
        due_before:
          type: string
        limit:
          type: integer
          minimum: 1
      additionalProperties: false
    output_schema:
      type: object
      additionalProperties: true
  - name: task:complete
    entry: tool-impl/task-tools.ts
    permission: write
    required_scopes:
      - type: path
        pattern: .sidekick/**
        access: read
      - type: path
        pattern: .sidekick/**
        access: write
    input_schema:
      type: object
      properties:
        id:
          type: string
          minLength: 1
        note:
          type: string
        dry_run:
          type: boolean
      required: [id]
      additionalProperties: false
    output_schema:
      type: object
      additionalProperties: true
  - name: task:schedule
    entry: tool-impl/task-tools.ts
    permission: write
    required_scopes:
      - type: path
        pattern: .sidekick/**
        access: read
      - type: path
        pattern: .sidekick/**
        access: write
    input_schema:
      type: object
      properties:
        id:
          type: string
          minLength: 1
        due_at:
          type: string
        cron:
          type: string
        dry_run:
          type: boolean
      required: [id]
      additionalProperties: false
    output_schema:
      type: object
      additionalProperties: true
  - name: memory:store
    entry: tool-impl/memory-tools.ts
    permission: write
    required_scopes:
      - type: path
        pattern: .sidekick/**
        access: read
      - type: path
        pattern: .sidekick/**
        access: write
    input_schema:
      type: object
      properties:
        type:
          type: string
          enum: [fact, preference, note, snippet]
        content:
          type: string
          minLength: 1
        tags:
          type: array
          items: { type: string }
        dry_run:
          type: boolean
      required: [type, content]
      additionalProperties: false
    output_schema:
      type: object
      additionalProperties: true
  - name: memory:recall
    entry: tool-impl/memory-tools.ts
    permission: read
    required_scopes:
      - type: path
        pattern: .sidekick/**
        access: read
    input_schema:
      type: object
      properties:
        query:
          type: string
        type:
          type: string
          enum: [fact, preference, note, snippet]
        tags:
          type: array
          items: { type: string }
        limit:
          type: integer
          minimum: 1
      additionalProperties: false
    output_schema:
      type: object
      additionalProperties: true
  - name: memory:forget
    entry: tool-impl/memory-tools.ts
    permission: write
    required_scopes:
      - type: path
        pattern: .sidekick/**
        access: read
      - type: path
        pattern: .sidekick/**
        access: write
    input_schema:
      type: object
      properties:
        id:
          type: string
          minLength: 1
        dry_run:
          type: boolean
      required: [id]
      additionalProperties: false
    output_schema:
      type: object
      additionalProperties: true
  - name: channel:configure
    entry: tool-impl/channel-tools.ts
    permission: write
    required_scopes:
      - type: path
        pattern: .sidekick/**
        access: read
      - type: path
        pattern: .sidekick/**
        access: write
    input_schema:
      type: object
      properties:
        name:
          type: string
          minLength: 1
        type:
          type: string
          enum: [terminal]
        dry_run:
          type: boolean
      required: [name]
      additionalProperties: false
    output_schema:
      type: object
      additionalProperties: true
  - name: channel:send
    entry: tool-impl/channel-tools.ts
    permission: write
    required_scopes:
      - type: path
        pattern: .sidekick/**
        access: read
      - type: path
        pattern: .sidekick/**
        access: write
    input_schema:
      type: object
      properties:
        channel:
          type: string
        content:
          type: string
          minLength: 1
        sender:
          type: string
        dry_run:
          type: boolean
      required: [content]
      additionalProperties: false
    output_schema:
      type: object
      additionalProperties: true
  - name: channel:receive
    entry: tool-impl/channel-tools.ts
    permission: read
    required_scopes:
      - type: path
        pattern: .sidekick/**
        access: read
    input_schema:
      type: object
      properties:
        channel:
          type: string
        limit:
          type: integer
          minimum: 1
        since:
          type: string
      additionalProperties: false
    output_schema:
      type: object
      additionalProperties: true
  - name: routine:create
    entry: tool-impl/routine-tools.ts
    permission: write
    required_scopes:
      - type: path
        pattern: .sidekick/**
        access: read
      - type: path
        pattern: .sidekick/**
        access: write
    input_schema:
      type: object
      properties:
        name:
          type: string
          minLength: 1
        steps:
          type: array
          minItems: 1
          items:
            type: object
            properties:
              tool:
                type: string
                minLength: 1
              input:
                type: object
                additionalProperties: true
            required: [tool]
            additionalProperties: false
        cron:
          type: string
        enabled:
          type: boolean
        dry_run:
          type: boolean
      required: [name, steps]
      additionalProperties: false
    output_schema:
      type: object
      additionalProperties: true
  - name: routine:list
    entry: tool-impl/routine-tools.ts
    permission: read
    required_scopes:
      - type: path
        pattern: .sidekick/**
        access: read
    input_schema:
      type: object
      properties:
        enabled_only:
          type: boolean
        limit:
          type: integer
          minimum: 1
      additionalProperties: false
    output_schema:
      type: object
      additionalProperties: true
  - name: routine:run
    entry: tool-impl/routine-tools.ts
    permission: read
    required_scopes:
      - type: path
        pattern: .sidekick/**
        access: read
    input_schema:
      type: object
      properties:
        id:
          type: string
          minLength: 1
      required: [id]
      additionalProperties: false
    output_schema:
      type: object
      additionalProperties: true
  - name: sidekick:init
    entry: tool-impl/system-tools.ts
    permission: write
    required_scopes:
      - type: path
        pattern: .sidekick/**
        access: read
      - type: path
        pattern: .sidekick/**
        access: write
    input_schema:
      type: object
      properties: {}
      additionalProperties: false
    output_schema:
      type: object
      additionalProperties: true
  - name: sidekick:status
    entry: tool-impl/system-tools.ts
    permission: read
    required_scopes:
      - type: path
        pattern: .sidekick/**
        access: read
    input_schema:
      type: object
      properties: {}
      additionalProperties: false
    output_schema:
      type: object
      additionalProperties: true
  - name: sidekick:export
    entry: tool-impl/system-tools.ts
    permission: read
    required_scopes:
      - type: path
        pattern: .sidekick/**
        access: read
    input_schema:
      type: object
      properties:
        include_audit:
          type: boolean
      additionalProperties: false
    output_schema:
      type: object
      additionalProperties: true
policies:
  - id: sidekick.policy.default
    trigger: on_tool_request
    decision: allow
    reason: Default sidekick policy permits declared tools within scoped access.
evidence_types:
  - sidekick.audited.tool-call
state_aliases: {}
lane_templates: []
